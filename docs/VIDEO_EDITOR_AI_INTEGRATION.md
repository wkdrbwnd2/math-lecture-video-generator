# 비디오 편집기 AI 통합 설계

## 개요

기존 자료들(simulation 영상, 이미지, 대본, 대화 히스토리)을 활용하여 비디오 편집 틀을 만들고, 편집 도중에도 AI가 모든 컨텍스트를 활용하여 편집을 지원하는 시스템.

## 아키텍처

### 1. 데이터 흐름

```
[기존 자료들]
├── Simulation 영상 (outputs/simulations/)
├── 대본 (outputs/scripts/)
├── 대화 히스토리 (session-based)
└── 이미지/기타 미디어 (outputs/images/)

        ↓

[편집 프로젝트]
├── 프로젝트 메타데이터
├── 타임라인 구조
├── 사용된 미디어 목록
└── 편집 히스토리

        ↓

[AI 컨텍스트 관리]
├── 대본 분석
├── 시뮬레이션 영상 분석
├── 대화 히스토리 통합
└── 편집 상태 추적

        ↓

[AI 편집 지원]
├── 자동 구조 생성
├── 실시간 편집 제안
├── 컨텍스트 기반 편집 실행
└── 사용자 요청 처리
```

## 주요 기능

### 1. 자동 자료 로드

편집 페이지 진입 시:
- 최근 생성된 simulation 영상 자동 로드
- 최근 생성된 대본 자동 로드
- 관련 대화 히스토리 자동 로드
- AI가 자료들을 분석하여 초기 편집 구조 제안

### 2. AI 컨텍스트 관리

**컨텍스트 수집:**
- 대본 내용 (전체 텍스트)
- 시뮬레이션 영상 메타데이터 (길이, 해상도 등)
- 대화 히스토리 (전체 대화)
- 현재 편집 상태 (타임라인 구조, 클립 정보)
- 사용자가 추가한 미디어

**컨텍스트 활용:**
- AI가 모든 컨텍스트를 이해하고 편집 제안
- 사용자 요청에 대해 컨텍스트를 참조하여 응답
- 편집 작업을 컨텍스트에 맞게 자동 실행

### 3. 실시간 AI 편집 지원

**AI 어시스턴트 패널:**
- 편집 중 언제든지 AI에게 요청 가능
- 예: "이 부분에 전환 효과 추가해줘", "대본에 맞춰 자막 생성해줘"
- AI가 컨텍스트를 이해하고 자동으로 편집 실행

**편집 작업 유형:**
- 자막 생성 (대본 기반)
- 전환 효과 추가
- 클립 배치 최적화
- 음성/배경음 추가
- 효과/필터 적용
- 비디오 세그먼트 생성 (AI 비디오 생성)

### 4. 편집 프로젝트 저장/로드

**프로젝트 저장:**
- 편집 상태를 JSON으로 저장
- 타임라인 구조, 클립 정보, 효과 등 모든 정보 저장
- 나중에 다시 불러와서 계속 편집 가능

## API 엔드포인트

### 1. 편집 프로젝트 관리

```
POST /api/video-editor/project/save
- 편집 프로젝트 저장

GET /api/video-editor/project/load/:projectId
- 편집 프로젝트 로드

GET /api/video-editor/project/list
- 프로젝트 목록 조회
```

### 2. AI 편집 지원

```
POST /api/video-editor/ai/analyze-context
- 현재 컨텍스트 분석 및 편집 제안

POST /api/video-editor/ai/execute-edit
- AI가 편집 작업 실행 (자막 생성, 효과 추가 등)

POST /api/video-editor/ai/chat
- AI와 실시간 대화 (편집 중 요청)
```

### 3. 자료 통합

```
GET /api/video-editor/resources
- 모든 관련 자료 가져오기 (simulation, script, history)

POST /api/video-editor/resources/auto-load
- AI가 자료를 분석하여 자동으로 편집 구조 생성
```

## 구현 단계

### Phase 1: 기본 통합
1. 기존 자료 자동 로드 기능
2. AI 컨텍스트 수집 시스템
3. 기본 AI 어시스턴트 패널

### Phase 2: AI 편집 기능
1. 자막 자동 생성 (대본 기반)
2. 클립 배치 제안
3. 효과/전환 제안

### Phase 3: 고급 기능
1. AI 비디오 세그먼트 생성
2. 음성/배경음 자동 추가
3. 스마트 편집 제안

### Phase 4: 프로젝트 관리
1. 프로젝트 저장/로드
2. 버전 관리
3. 협업 기능 (선택사항)



